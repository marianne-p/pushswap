#include <stdio.h>
#include <strings.h>
#include <stdlib.h>


int	get_max(int *list, int size, int i, int max)
{
	while (i < size)
	{
		if (list[i] > max)
			max = list[i];
		i++;
	}
	return (max);
}
/*
void	sort_one_digit(int *list, int *res, int size, int pos)
{
	int	*count;
	int	i;
	int	k;

	if (size < 10)
		k = size - 1;
	else
		k = 10;
	i = 0;
	count = (int *)malloc(sizeof(int) * 10);
	if (!count)
		return ;
	bzero(count, k * sizeof(int));
	while (i < k)
		count[(list[i++] / pos) % k]++;
	i = 1;
	while (i < k)
	{
		count[i] += count[i - 1];
		i++;
	}
	i = 0;
	while (i < size)
	{
		res[count[(list[i] / pos) % k]] = list[i];
		count[(list[i++] / pos) % k]--;
	}
	free(count);
}*/

void sort_one_digit(int *list, int *res, int size, int pos) 
{
    int *count;
    int i;
/*  int	max;

    max = (array[0] / pos) % 10;
    i = 1;
    while (i < size)
    {
	    if (((array[i] / pos) % 10) > max)
		    max = array[i];
    }*/
    count = (int *)malloc(sizeof(int) * size);
    if (!count)
        return;
    bzero(count, sizeof(int) * size);

    // Count occurrences of each digit
    for (i = 0; i < size; i++)
        count[(list[i] / pos) % 10]++;

    // Accumulate counts
    for (i = 1; i < 10; i++)
        count[i] += count[i - 1];

    // Build the output array
    for (i = size - 1; i >= 0; i--) {
        res[count[(list[i] / pos) % 10] - 1] = list[i];
        count[(list[i] / pos) % 10]--;
    }

    for (i = 0; i < size; i++)
	    list[i] = res[i];

    free(count);
}

int	*radix_sort(int *list, size_t size)
{
	int	*res;
	int	max;
	unsigned int	pos;
	
	pos = 1;
	max = get_max(list, size, 0, 0);
	res = (int *)malloc(sizeof(int) * size);
	if (!res)
		return (NULL);
	bzero(res, size * sizeof(int));
	while (max / pos > 0)
	{
		sort_one_digit(list, res, size, pos);
		pos *= 10;
	}
	return (res);
}

int     main(void)
{
	int	rray[1000] = {6312, 9726, 2786, 1260, 2753, 9710, 7375, 3482, 9790, 7761, 2886, 8015, 7226, 3712, 1600, 2544, 7689, 8576, 9567, 7004, 3406, 9071, 8041, 2773, 4104, 7056, 5891, 6809, 8161};/*	3344, 7407, 2430, 7369, 3077, 9027, 9779, 6675, 2978, 5824, 9763, 3220, 3944, 9205, 2262, 8092, 9517, 7749, 8444, 9483, 4605, 9890, 5428, 8561, 4757, 7670, 1202, 6284, 6549, 6816, 8629, 3883, 2952, 5681, 9334, 2125, 1606, 3346, 3483, 4647, 4298, 9008, 2322, 1240, 1998, 6639, 8036, 8097, 4370, 3974, 3377, 1706, 9317, 1930, 4838, 4687, 2234, 1844, 4625, 3370, 8532, 2992, 2104, 5940, 2382, 2313, 9037, 4764, 2807, 7704, 3337, 7602, 5569, 6129, 9077, 5695, 7336, 7434, 4125, 8402, 8497, 1974, 4864, 9338, 1002, 9277, 7522, 9981, 4682, 7488, 3573, 5655, 7201, 3873, 8965, 9780, 4313, 5336, 8835, 5594, 7315, 5007, 5842, 3399, 5829, 4254, 
		5941, 1206, 8941, 8501, 8703, 1329, 2209, 3586, 6540, 8634, 1911, 8566, 3577, 6695, 7653, 1649, 5626, 2555, 8425, 3501, 9123, 6385, 5391, 3249, 9588, 1486, 5578, 1428, 4854, 6443, 3782, 9427, 7015, 4103, 3929, 9618, 4236, 1993, 8192, 2823, 1444, 4051, 1919, 1520, 9662, 2409, 4509, 3183, 5313, 6183, 9949, 5926, 4969, 7645, 2358, 7457, 3102, 7419, 8067, 5199, 3314, 4942, 2272, 4027, 4634, 7707, 9941, 2081, 8325, 6743, 5518, 8359, 5610, 9939, 6981, 1525, 5196, 1197, 9066, 4515, 1054, 2105, 7379, 4304, 2006, 
		3005, 8917, 9493, 3083, 9244, 5852, 2455, 9041, 4076, 7489, 7441, 3560, 6268, 5710, 9229, 1122, 2685, 6709, 4004, 5318, 3036, 2485, 6321, 5456, 3601, 5961, 2221, 3819, 7174, 4333, 7773, 6537, 5768, 6769, 2834, 4814, 7352, 1274, 7954, 3897, 9045, 6291, 4780, 6473, 8587, 6969, 9554, 1988, 8026, 7868, 7317, 8752, 1344, 3978, 9577, 9000, 5937, 3730, 3045, 7698, 5756, 6273, 8810, 6058, 7607, 8407, 2175, 2528, 4589, 8609, 2041, 9055, 9689, 3889, 4742, 8293, 5094, 8869, 3038, 6973, 2011, 5648, 2422, 8024, 1183, 9657, 1806, 4395, 3200, 7391, 1891, 6861, 9210, 5816, 9322, 9211, 3445, 5224, 1650, 9869, 5978, 6992, 4788, 9925, 7433, 9010, 5111, 5356, 2645, 2330, 6281, 2588, 5741, 1363, 8419, 4588, 4776, 8291, 8731, 5149, 2880, 1283, 7449, 2641, 8029, 5205, 4745, 9978, 4563, 5506, 6659, 3202, 2116, 8165, 3930, 4516, 5975, 2896, 7638, 4666, 1418, 9145, 3273, 5332, 7936, 8809, 7126, 5751, 4086, 1496, 4521, 7514, 2314, 4314, 9953, 9072, 7125, 2631, 8053, 1305, 2960, 1682, 7355, 3686, 1938, 1417, 8578, 8202, 7663, 1712, 4586, 4316, 4714, 8999, 2173, 1883, 3518, 4639, 8070, 8244, 4418, 5039, 9477, 5400, 7480, 4627, 9170, 2938, 6998, 1958, 3607, 7456, 3893, 2171, 7313, 4171, 2743, 7008, 1150, 3198, 3115, 8799, 6777, 6688, 3127, 8590, 1872, 5274, 8635, 2381, 1786, 9757, 8971, 6644, 4694, 1658, 4140, 1578, 4390, 8549, 6265, 9672, 7409, 5116, 8298, 6111, 6375, 7644, 5715, 7772, 3171, 1561, 2888, 3455, 4990, 8201, 8790, 6173, 6233, 3780, 8294, 7933, 2106, 2113, 5068, 4911, 7501, 9938, 1106, 8232, 2037, 4278, 1301, 7858, 3970, 6935, 3638, 8787, 2341, 1443, 1873, 9990, 2618, 9950, 9971, 6820, 5322, 9755, 9829, 7998, 3538, 4613, 3263, 4479, 3082, 3865, 8263, 7021, 2745, 7603, 7820, 3917, 7809, 4598, 6734, 5460, 8277, 1979, 4065, 7929, 6763, 7511, 7730, 1588, 3184, 6251, 4160, 5284, 7205, 6891, 6374, 1162, 9350, 9122, 1269, 7535, 3723, 3467, 9558, 6817, 8217, 9279, 8169, 5611, 6329, 4322, 6557, 8012, 4638, 4320, 9192, 7200, 7446, 6147, 9514, 2477, 1540, 5809, 2292, 2066, 4770, 6609, 7909, 9236, 4530, 6802, 4358, 8200, 3604, 7856, 2249, 8940, 7666, 9543, 2953, 7128, 9961, 7370, 8647, 4996, 7296, 2075, 8759, 8742, 2815, 8343, 3360, 1851, 3997, 4677, 8597, 9778, 3653, 6810, 3351, 3335, 8127, 7412, 8679, 2560, 2915, 3381, 7242, 7808, 4538, 3219, 7582, 9547, 7345, 7895, 7304, 9353, 8006, 4597, 2024, 7209, 2931, 7192, 1582, 1107, 5836, 2835, 7942, 2698, 6986, 4117, 1833, 7100, 4841, 4574, 4895, 4034, 8595, 7794, 3239, 5764, 8469, 9772, 7189, 7090, 7920, 3054, 3520, 8677, 1880, 8364, 4848, 5770, 9825, 2253, 7421, 8340, 4408, 6466, 5719, 1129, 5656, 3540, 1977, 1381, 9049, 8051, 1659, 5875, 9922, 7801, 5971, 3367, 9740, 6448, 1149, 1553, 4369, 5556, 3656, 4178, 3122, 4832, 2277, 3113, 3869, 5177, 3008, 3422, 7867, 6741, 3775, 4218, 6112, 2505, 3550, 7816, 8129, 3794, 2458, 6568, 8807, 7397, 2328, 5794, 7769, 9311, 9842, 3951, 4101, 7253, 2910, 4422, 4606, 3025, 5060, 9107, 3536, 6304, 9857, 8489, 4211, 5200, 4502, 5892, 2287, 2697, 7788, 6162, 7002, 7838, 9375, 5541, 1719, 6296, 9500, 7950, 3120, 2388, 7495, 7493, 2859, 1560, 4466, 3707, 8215, 1853, 2167, 3221, 6365, 9510, 8264, 4541, 2155, 5188, 7896, 9167, 5231, 7243, 4693, 5461, 1268, 9006, 2741, 5950, 4552, 7505, 2748, 3191, 8471, 4120, 7154, 6425, 6372, 6064, 2311, 6512, 7297, 3691, 8431, 7924, 4271, 7852, 2046, 1896, 8005, 3158, 3537, 1462, 8975, 9147, 4644, 9986, 1358, 3608, 3529, 7685, 7989, 6373, 5790, 4594, 9428, 7822, 1303, 8339, 7634, 3069, 5033, 6933, 6616, 5686, 1037, 1382, 3148, 2919, 3654, 5995, 2042, 5850, 5879, 7887, 5378, 8332, 8056, 1656, 9225, 8903, 1632, 4865, 4373, 7214, 3365, 4110, 5335, 4154, 7354, 7627, 7411, 3024, 1203, 5845, 4379, 1783, 9804, 8302, 2165, 2849, 9445, 4385, 7166, 9146, 4660, 3595, 2800, 2600, 3884, 2009, 8889, 9803, 5779, 1946, 7771, 4111, 1277, 6343, 5874, 6489, 7061, 2503, 7147, 2712, 9566, 6097, 6390, 8876, 6403, 8361, 4590, 4903, 5590, 3206, 3232, 8130, 6356, 2339, 9023, 6294, 4702, 8598, 2873, 6684, 3685, 4897, 5537, 5855, 8126, 8884, 4472, 8953, 1817, 7306, 8797, 5076, 2790, 2529, 7610, 3150, 4080, 3866, 5815, 9564, 1722, 3301, 7252, 9583, 8185, 3261, 1407, 1099, 2362, 3763, 8222, 9214, 8873, 3096, 7910, 7497, 9407, 4067, 6905, 2893, 5310, 4420, 6864, 1507, 2495, 2587, 9401, 3119, 8715, 3751, 4468, 5990, 7422, 1152, 6822, 8901, 5890, 4036, 1679, 9118, 1413, 8543, 7872, 9219, 9372, 9293, 1264, 3826, 1782, 5152, 9497, 1157, 4185, 1516, 4572, 3386, 4041, 9810, 7499, 9561, 6481, 4692, 3270, 3551, 8058, 3402, 2285, 8064, 5095, 6530, 8390, 4545, 5685, 4802, 5523, 7292, 8315, 9162, 9414, 8904, 1335, 7545, 6770, 3084, 6633, 4617, 9430, 9263, 2667, 1973, 6504, 8948, 1898, 8191, 9306, 4073, 
		3027, 8322, 7898, 7758, 6638, 3964, 7983, 9464};*/
	int     i = 0;
        int	*arr;

        arr = radix_sort(rray, 29);
        while (i < 30)
        {
                printf("%d, ", arr[i]);
                i++;
        }
	free(arr);
}

/*
int	main(int argc, char **argv)
{
	unsigned int	i;
	int	*list;

	i = 0;
	list = (int *)malloc(sizeof(int) * argc);
	if (!list)
		return (0);
	list = ft_bzero(list, argc);
	while (i < argc)
	{
		list[i] = ft_atoi(argv[i + 1]);
		i++;
	}
	list = radix_sort(list, sizeof(list));
	i = 0;
	while (i < argc)
		ft_printf("	%d\n", list[i++]);
}*/
